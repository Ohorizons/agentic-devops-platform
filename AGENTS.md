# Three Horizons Accelerator - Agent Playbook

## Overview

This repository utilizes a **Dual-Agent Architecture** to accelerate both development and operations:

1. **Copilot Agents (Assistant Layer):** Conversational agents in your IDE that help you plan, code, and configure.
2. **Deployment Agents (Automation Layer):** IssueOps agents that execute infrastructure changes via GitHub Actions.

---

## 1. Copilot Agents (Assistant Layer)

These agents live in GitHub Copilot (Chat). Use them to accelerate your daily tasks.

| Agent | Specialized Role | When to use? |
| :--- | :--- | :--- |
| `@onboarding` | **The Guide** | "I just forked this repo, what do I do?" |
| `@architect` | Solution Design | "How should I design a new microservice?" |
| `@platform` | IDP & Templates | "I want to create a new Golden Path." |
| `@terraform` | IaC & Azure | "Help me configure the AKS module." |
| `@reviewer` | Code Quality | "Review my PR for security issues." |
| `@devops` | CI/CD Pipelines | "Optimize this GitHub Actions workflow." |
| `@security` | Compliance | "Am I following the security baseline?" |
| `@sre` | Observability | "How do I debug this production error?" |
| `@test` | Testing & QA | "Write a unit test for this function." |
| `@docs` | Documentation | "Generate a Mermaid diagram for this flow." |

### How to use

In VS Code or GitHub.com, type `@agent-name` in the Copilot Chat window.

> **Example:** `@onboarding help me check if I have all prerequisites installed.`

---

## 2. Deployment Agents (Automation Layer)

These agents are autonomous robots triggered by **GitHub Issues**. They perform the heavy lifting of provisioning infrastructure.

| Agent | Trigger | Purpose |
| :--- | :--- | :--- |
| **Infrastructure** | `agent:infrastructure` | Deploys AKS, VNet, ACR, Key Vault (H1). |
| **GitOps** | `agent:gitops` | Installs ArgoCD and configures clusters (H2). |
| **AI Foundry** | `agent:ai-foundry` | Provisions Azure AI Studio & Models (H3). |
| **Golden Paths** | `agent:golden-paths` | Registers templates in RHDH. |

### How to use

1. Go to the **Issues** tab.
2. Click **New Issue**.
3. Select a template (e.g., "Deploy H1 Foundation").
4. Submit the issue. The **Agent Router** will pick it up and execute the deployment.

---

## Workflow Patterns

### The "Fork-to-Deploy" Journey

1. **Start:** User forks repo.
2. **Guide:** User asks `@onboarding`: "Help me get started".
3. **Config:** `@onboarding` helps user create `.tfvars`.
4. **Deploy:** User opens "Deploy H1" Issue.
5. **Action:** `Infrastructure Agent` runs Terraform.
6. **Result:** Foundation layer is live.

### New Feature Implementation

1. `@architect` - Design and plan (Create ADR).
2. `@docs` - Document requirements and diagrams.
3. `@test` - Write TDD test cases.
4. `@terraform` / `@platform` - Implement Infrastructure / Code.
5. `@devops` - Configure Pipeline.
6. `@reviewer` - Final Code & Security Review.
7. **Merge** -> Triggers CI/CD.

---

## Agent Directories

- **Copilot Agents:** Definitions located in [`.github/agents/`](./.github/agents/).
- **Deployment Agents:** Specifications located in [`agents/`](./agents/). See [Deployment Agent Index](./agents/README.md) for details.
- **Skills:** Reusable tools located in [`.github/skills/`](./.github/skills/).

---

## Best Practices

1. **One Agent, One Task:** Don't ask `@terraform` to design a UI. Use `@architect` or `@platform`.
2. **Use Handoffs:** Agents are aware of each other. If `@onboarding` sees you need complex design help, it will refer you to `@architect`.
3. **Trust but Verify:** Always review the code generated by Copilot agents before committing.
4. **Security First:** Never put real secrets in chat. Use Key Vault references.

---

## Related Documentation

- [Deployment Guide](docs/guides/DEPLOYMENT_GUIDE.md)
- [Copilot Agents Best Practices](github-copilot-agents-best-practices.md)
