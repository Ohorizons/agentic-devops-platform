// For license information, see `https://assets.adobedtm.com/c5eace8ae526/cd4910803903/fb4fbd3746e7/RC576ff5d6229745688a550c7c8379f093-source.js`.
_satellite.__registerScript('https://assets.adobedtm.com/c5eace8ae526/cd4910803903/fb4fbd3746e7/RC576ff5d6229745688a550c7c8379f093-source.min.js', "var affinityDebug=window.location.search.indexOf(\"affinityDebug=1\")>-1;affinityDebug&&console.time(\"Affinity Scripts\"),affinityDebug&&console.log(\"[Inside Affinity Script processing]\");var taxonomyKey,i,taxonomyProduct=_satellite.getVar(\"Page | Taxonomy Product | [Global]\"),taxonomyTopic=_satellite.getVar(\"Page | Taxonomy Topic | [Global]\"),productAffinityObj=JSON.parse(localStorage.getItem(\"productAffinities\"))||{},topicAffinityObj=JSON.parse(localStorage.getItem(\"topicAffinities\"))||{},pointValue=5,affinitiesObj={},newSession=function(t,o){for(i in affinityDebug&&console.log(JSON.parse(JSON.stringify(t))),t)t[i]=t[i]/1.5,t[i]<1&&delete t[i];affinityDebug&&console.log(JSON.parse(JSON.stringify(t))),localStorage.setItem(o,JSON.stringify(t))},processNewTaxonomyValues=function(t,o,e){for(i in affinityDebug&&console.log(\"-\"+o+\"-\"),affinityDebug&&console.log(e),affinityDebug&&console.log(JSON.parse(JSON.stringify(t))),e)t[taxonomyKey=\"_\"+e[i]]?t[taxonomyKey]=parseFloat(t[taxonomyKey])+pointValue:t[taxonomyKey]=pointValue;affinityDebug&&console.log(JSON.parse(JSON.stringify(t))),localStorage.setItem(o,JSON.stringify(t))},top5=function(i,t){var o,e=[];for(o in i)e.push([o,i[o]]);e.sort((function(i,t){return t[1]-i[1]}));let n=[];affinityDebug&&console.log(\"-\"+t+\"-\");for(var f=4;f>=0;f--)e[f]?(n.push(e[f][0].substr(1)),affinityDebug&&console.log(e[f][0].substr(1)),_satellite.setVar(t+(f+1),e[f][0].substr(1))):_satellite.setVar(t+(f+1),\"\");affinitiesObj[t]=n.join(\", \")};_satellite.cookie.get(\"tntAffinitySession\")||(affinityDebug&&console.log(\"[NEW SESSION]\"),newSession(productAffinityObj,\"productAffinities\"),newSession(topicAffinityObj,\"topicAffinities\"),pointValue=10),_satellite.cookie.set(\"tntAffinitySession\",\"true\",{expires:1/48}),affinityDebug&&console.log(\"[PROCESSING NEW VALUES]\"),processNewTaxonomyValues(productAffinityObj,\"productAffinities\",taxonomyProduct),processNewTaxonomyValues(topicAffinityObj,\"topicAffinities\",taxonomyTopic),affinityDebug&&console.log(\"[TOP 5 in Reverse Order]\"),top5(productAffinityObj,\"productAffinity\"),top5(topicAffinityObj,\"topicAffinity\"),window.appEventData=window.appEventData||[],appEventData.push({event:\"Taxonomy Affinities Processed\",taxonomyAffinities:affinitiesObj}),affinityDebug&&console.timeEnd(\"Affinity Scripts\");");