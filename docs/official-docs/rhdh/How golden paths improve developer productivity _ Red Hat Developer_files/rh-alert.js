import{i as t,_ as e,a as r,c as o,t as a}from"../custom-element-3.0.4.js";import{T as n,x as s,B as i}from"../lit-html-3.0.4.js";import{n as c}from"../property-3.0.4.js";import{e as l,i as d,t as h}from"../directive-3.0.4.js";import{p as u,v as p,r as f,M as m,m as v}from"../directive-helpers-3.0.4.js";import{e as g}from"../class-map-3.0.4.js";import{g as b}from"../random-3.0.4.js";import{t as x}from"../themable-3.0.4.js";import{S as y}from"../slot-controller-3.0.4.js";import"../rh-surface/rh-surface.js";import"../rh-button/rh-button.js";import"../rh-icon/rh-icon.js";import"../color-palettes-3.0.4.js";import"../logger-3.0.4.js";import"../query-3.0.4.js";import"../base-3.0.4.js";import"../if-defined-3.0.4.js";import"../internals-controller-3.0.4.js";import"../state-3.0.4.js";import"../unsafe-html-3.0.4.js";import"../observes-3.0.4.js";
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const w=(t,e,r)=>{const o=new Map;for(let a=e;a<=r;a++)o.set(t[a],a);return o},_=l(class extends d{constructor(t){if(super(t),t.type!==h.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,r){let o;void 0===r?r=e:void 0!==e&&(o=e);const a=[],n=[];let s=0;for(const e of t)a[s]=o?o(e,s):s,n[s]=r(e,s),s++;return{values:n,keys:a}}render(t,e,r){return this.dt(t,e,r).values}update(t,[e,r,o]){const a=u(t),{values:s,keys:i}=this.dt(e,r,o);if(!Array.isArray(a))return this.ut=i,s;const c=this.ut??=[],l=[];let d,h,g=0,b=a.length-1,x=0,y=s.length-1;for(;g<=b&&x<=y;)if(null===a[g])g++;else if(null===a[b])b--;else if(c[g]===i[x])l[x]=p(a[g],s[x]),g++,x++;else if(c[b]===i[y])l[y]=p(a[b],s[y]),b--,y--;else if(c[g]===i[y])l[y]=p(a[g],s[y]),f(t,l[y+1],a[g]),g++,y--;else if(c[b]===i[x])l[x]=p(a[b],s[x]),f(t,a[g],a[b]),b--,x++;else if(void 0===d&&(d=w(i,x,y),h=w(c,g,b)),d.has(c[g]))if(d.has(c[b])){const e=h.get(i[x]),r=void 0!==e?a[e]:null;if(null===r){const e=f(t,a[g]);p(e,s[x]),l[x]=e}else l[x]=p(r,s[x]),f(t,a[g],r),a[e]=null;x++}else m(a[b]),b--;else m(a[g]),g++;for(;x<=y;){const e=f(t,l[y+1]);p(e,s[x]),l[x++]=e}for(;g<=b;){const t=a[g++];null!==t&&m(t)}return this.ut=i,v(t,l),n}});var k,j,$,S,z,A,H;const C=t`:host{display:block;max-width:var(--_max-width,initial)}[hidden]{display:none!important}header{display:flex;align-items:center;justify-content:flex-start}.hasBody header{margin-block-end:var(--rh-space-xs,4px)}footer.hasActions{margin-block-start:var(--rh-space-lg,16px)}footer ::slotted([slot=actions]:not(rh-button[variant=link i])){margin-inline-end:var(--rh-space-xl,24px)!important;padding:0!important;border:none!important;background-color:initial!important;color:var(--rh-color-interactive-primary-default)!important;font-size:var(--rh-font-size-body-text-sm,.875rem)!important;font-family:var(--_font-family)!important}footer ::slotted([slot=actions]:focus){text-decoration:underline!important;color:var(--rh-color-interactive-primary-hover)!important}footer ::slotted([slot=actions]:hover){cursor:pointer!important;text-decoration:underline!important;color:var(--rh-color-interactive-primary-hover)!important}footer ::slotted(rh-button[variant=link i]){display:inline-block;translate:calc(var(--rh-space-lg, 16px)*-1)}#container{--_background-color:var(--rh-color-teal-10,#daf2f2);--_border-color:var(--rh-color-teal-50,#37a3a3);--_icon-color:var(--rh-color-teal-50,#37a3a3);border-width:var(--rh-border-width-md,2px);border-style:solid;border-color:var(--_border-color);border-inline-start-color:#0000;border-block-end-color:#0000;border-inline-end-color:#0000;background-color:var(--_background-color);box-shadow:var(--_box-shadow,none);padding:var(--rh-space-lg,16px);display:grid;grid-template-columns:min-content 1fr;gap:var(--rh-space-xs,4px);font-family:var(--rh-font-family-body-text,RedHatText,"Red Hat Text",Helvetica,Arial,sans-serif);font-weight:var(--rh-font-weight-body-text-regular,400);font-size:var(--rh-font-size-body-text-sm,.875rem);line-height:var(--rh-line-height-body-text,1.5)}#container header ::slotted(*){font-family:var(--rh-font-family-body-text,RedHatText,"Red Hat Text",Helvetica,Arial,sans-serif)!important;font-weight:var(--rh-font-weight-body-text-medium,500)!important;font-size:var(--rh-font-size-body-text-sm,.875rem)!important;line-height:var(--rh-line-height-body-text,1.5)!important;margin:0!important}#container header ::slotted(:is(h1,h2,h3,h4,h5,h6)){padding-block:2px var(--rh-space-xs,4px)!important}#container #description>::slotted(*){font-size:var(--rh-font-size-body-text-sm,.875rem)!important;margin-block:0!important;padding:0!important}#container.neutral{--_border-color:var(--rh-color-status-neutral);--_icon-color:var(--rh-color-icon-status-neutral);--_background-color:var(--rh-color-surface-status-neutral)}#container.info{--_border-color:var(--rh-color-status-info);--_icon-color:var(--rh-color-icon-status-info);--_background-color:var(--rh-color-surface-status-info)}#container.success{--_border-color:var(--rh-color-status-success);--_icon-color:var(--rh-color-icon-status-success);--_background-color:var(--rh-color-surface-status-success)}#container.caution{--_border-color:var(--rh-color-status-caution);--_icon-color:var(--rh-color-icon-status-caution);--_background-color:var(--rh-color-surface-status-caution)}#container.warning{--_border-color:var(--rh-color-status-warning);--_icon-color:var(--rh-color-icon-status-warning);--_background-color:var(--rh-color-surface-status-warning)}#container.danger{--_border-color:var(--rh-color-status-danger);--_icon-color:var(--rh-color-icon-status-danger);--_background-color:var(--rh-color-surface-status-danger)}#container.toast{--_background-color:var(--rh-color-surface-lightest,#fff);--_max-width:550px;--_box-shadow:var(--rh-box-shadow-xl,0 8px 24px 3px #15151559)}#container.alternate{border-inline-start-color:var(--_border-color);border-block-end-color:var(--_border-color);border-inline-end-color:var(--_border-color)}#left-column,#middle-column{display:inline-block;vertical-align:top}#header-actions{margin-inline-end:var(--rh-space-xs,4px)}#header{color:var(--rh-color-text-primary);flex:1 1 auto}#icon{display:flex;align-items:center;justify-content:center;width:var(--rh-size-icon-02,24px);height:var(--rh-size-icon-02,24px);color:var(--_icon-color)}#close-button{color:var(--rh-color-text-secondary);background-color:initial;border:none;height:var(--rh-length-xl,24px);width:var(--rh-length-xl,24px);cursor:pointer}#close-button:hover{color:var(--rh-color-text-primary)}`,E=t`.rh-alert-toast-group{position:fixed;z-index:1000;inset-block-start:var(--rh-space-lg,16px);inset-inline-end:var(--rh-space-lg,16px);padding-block-end:var(--rh-space-4xl,64px);display:grid;justify-items:end;justify-content:center;gap:var(--rh-space-lg,16px);pointer-events:none}.rh-alert-toast-group rh-alert{--_duration:8s;--_travel-distance:0;pointer-events:all;will-change:transform;animation:fade-in .3s ease,slide-in .3s ease,fade-out .3s ease var(--_duration)}.rh-alert-toast-group rh-alert.persistent{animation:slide-in .3s ease}@media (prefers-reduced-motion:no-preference){.rh-alert-toast-group rh-alert{--_travel-distance:var(--rh-space-4xl,64px)}}@keyframes fade-in{0%{opacity:0}}@keyframes fade-out{to{opacity:0}}@keyframes slide-in{0%{transform:translateY(var(--_travel-distance,var(--rh-space-lg,16px)))}}`,T=new Map(Object.entries({neutral:"minus-circle-fill",info:"information-fill",success:"check-circle-fill",caution:"error-fill",warning:"warning-fill",danger:"ban-fill"}));class L extends Event{constructor(t){super("close",{bubbles:!0,cancelable:!0}),this.action=t}}let M;const R=new Set;let q=class extends r{constructor(){super(...arguments),k.add(this),this.state="neutral",this.dismissable=!1,$.set(this,new y(this,"header",null,"actions"))}static async toast({message:t,persistent:e=!1,heading:r="Success",state:o="info",actions:a}){const n=a??[];M??(M=function(){const t=document.createElement("section");return t.classList.add("rh-alert-toast-group"),document.adoptedStyleSheets=[...document.adoptedStyleSheets??[],E.styleSheet],document.body.append(t),t}());const s=b(),i={actions:n,heading:r,message:t,state:o,id:s,persistent:e};R.add(i);const{matches:c}=window.matchMedia("(prefers-reduced-motion: no-preference)");B();const l=M.querySelector(`#${s}`);M.children.length&&c&&function(t){const e=t.offsetHeight,r=t.offsetHeight,o=r-e,a=t.animate([{transform:`translateY(${o}px)`},{transform:"translateY(0)"}],{duration:150,easing:"ease-out"});a.startTime=document.timeline.currentTime}(M),await Promise.all(M.getAnimations().map((t=>t.finished))),e||(await Promise.all(l?.getAnimations().map((t=>t.finished))??[]),R.delete(i)),B()}connectedCallback(){super.connectedCallback(),this.requestUpdate()}render(){const t=o(this,$,"f").hasSlotted("actions"),e=o(this,$,"f").hasSlotted(y.default),{variant:r="inline"}=this,a=o(this,k,"m",z).call(this,this.state),n=s`<footer class="${g({hasActions:t})}"
                  @click="${o(this,k,"m",H)}">
            <slot name="actions"></slot>
          </footer>`;return s`
      <rh-surface id="container"
                  class="${g({hasBody:e,light:!0,[a]:!0,[r]:!!r})}"
                  role="alert"
                  aria-hidden="false"
                  color-palette="lightest">
        <div id="left-column">
          <rh-icon id="icon" set="ui" icon="${o(this,k,"a",j)}"></rh-icon>
        </div>
        <div id="middle-column">
          <header ?hidden="${o(this,$,"f").isEmpty("header")}">
            <div id="header">
              <slot name="header"></slot>
            </div>${this.dismissable||"toast"===this.variant?s`
            <div id="header-actions">
              <rh-button id="close-button"
                         variant="close"
                         accessible-label="Close"
                         confirm
                         @click="${o(this,k,"m",S)}"></rh-button>
            </div>`:""}
          </header>
          <div id="description">
            <slot></slot>
          </div>
          ${n}
        </div>
      </rh-surface>
    `}};function B(){i(_(R,(t=>t.id),(({actions:t,id:e,state:r,heading:o,message:a,persistent:n})=>{const[i,c]=t??[];return s`
    <rh-alert id="${e}"
              state="${r}"
              class="${g({persistent:n})}"
              variant="toast"
              role="status"
              aria-live="polite"
              @focusin="${P}"
              @focusout="${P}"
              @mouseenter="${P}"
              @mouseleave="${P}">
      <h3 slot="header">${o}</h3>
      ${a?"string"!=typeof a?a:s`
      <p class="text" ?hidden="${!a}">${a}</p>`:""}
      ${[i,c].filter((t=>!!t)).map((t=>s`
      <rh-button slot="actions"
                 variant="${t===i?"secondary":"link"}"
                 data-action="${t.action}">${t.text}</rh-button>
      `))??[]}
    </rh-alert>
  `})),M)}async function P(t){const e=t.target instanceof q?t.target:t.target instanceof Element?t.target.closest("rh-alert"):null;if(e)for(const r of e.getAnimations()??[])switch(t.type){case"focusin":case"mouseenter":return r.pause();case"focusout":case"mouseleave":if(!e.matches(":focus-within"))return r.play()}}$=new WeakMap,k=new WeakSet,j=function(){const t=this.state.toLowerCase();switch(t){case"note":return T.get("info");case"default":return T.get("neutral");case"error":return T.get("danger");default:return T.get(t)}},S=function(){this.dispatchEvent(new L("close"))&&o(this,k,"m",A).call(this)},z=function(t){switch(t.toLowerCase()){case"note":return"info";case"default":default:return"neutral";case"error":return"danger";case"danger":case"warning":case"caution":case"neutral":case"info":case"success":return t}},A=async function(){await this.updateComplete,await Promise.all(this.getAnimations().map((t=>(t.finish(),t.finished)))),this.remove()},H=async function(t){t.target instanceof HTMLElement&&"actions"===t.target?.slot&&"string"==typeof t.target.dataset.action&&this.dispatchEvent(new L(t.target?.dataset.action.toLowerCase()))&&o(this,k,"m",A).call(this)},q.styles=[C],e([c({reflect:!0})],q.prototype,"state",void 0),e([c({reflect:!0})],q.prototype,"variant",void 0),e([c({reflect:!0,type:Boolean})],q.prototype,"dismissable",void 0),q=e([a("rh-alert"),x],q);export{L as AlertCloseEvent,q as RhAlert};
